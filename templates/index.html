<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAGER DASHBOARD</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/leaflet.css') }}">

    <!-- Google Fonts (Keep CDN for now as fallbacks, attempting offline) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Nipple.js for Joystick -->
    <script src="{{ url_for('static', filename='vendor/nipplejs.min.js') }}"></script>
</head>

<body>

    <div class="app-container">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            <div class="logo">
                <h1>JAGER <span class="accent">DASH</span></h1>
                <!-- From Uiverse.io by EddyBel -->
                <label class="switch">
                    <input type="checkbox" class="input__check" id="theme-toggle" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Mode Selector -->
            <div class="mode-selector">
                <button class="mode-btn" data-mode="MANUAL">MANUAL</button>
                <button class="mode-btn active" data-mode="AUTONOMOUS">AUTO</button>
            </div>

            <div class="controls-wrapper">

                <!-- Status Card -->
                <div class="status-card">
                    <div class="status-row">
                        <span class="label">STATUS</span>
                        <span class="value" id="motion-state">STOPPED</span>
                    </div>
                    <div class="status-row">
                        <span class="label">MODE</span>
                        <span class="value accent-text" id="current-mode">MANUAL</span>
                    </div>
                    <div class="status-row">
                        <span class="label">GPS</span>
                        <span class="value" id="gps-status">WAITING</span>
                    </div>
                </div>

                <!-- Manual Control (Split) -->
                <div id="manual-controls" class="control-section">
                    <h3>MANUAL CONTROL</h3>
                    <div class="split-controls">
                        <div class="steer-zone" id="joystick-zone">
                            <div class="zone-label">STEER</div>
                        </div>
                        <div class="drive-zone">
                            <button id="btn-forward" class="drive-btn">‚ñ≤<br>FWD</button>
                            <button id="btn-backward" class="drive-btn">‚ñº<br>REV</button>
                        </div>
                    </div>
                    <p class="instruction">Joystick to Steer ‚Ä¢ Buttons to Drive</p>
                </div>

                <!-- Semi-Auto Controls (Map Actions) -->
                <div id="semi-auto-controls" class="control-section hidden">
                    <h3>NAVIGATION</h3>
                    <div class="action-card">
                        <button id="calc-route-btn" class="primary-btn" disabled>
                            <span class="icon">‚û§</span> Calculate Path
                        </button>

                        <button id="start-travel-btn" class="travel-btn hidden">
                            <span class="icon">üöÄ</span> Start Engine
                        </button>
                        <button id="stop-travel-btn" class="stop-btn hidden">
                            <span class="icon">‚èπ</span> Emergency Stop
                        </button>

                        <button id="reset-btn" class="secondary-btn">
                            Reset Map
                        </button>
                    </div>
                </div>

                <!-- Settings (Sliders) -->
                <div class="settings-card">
                    <h3>CONFIGURATION</h3>
                    <div class="slider-group">
                        <label>Max Speed: <span id="speed-val">100</span>%</label>
                        <input type="range" id="max-speed" min="0" max="100" value="100">
                    </div>
                    <div class="slider-group">
                        <label>Max Turn: <span id="turn-val">100</span>%</label>
                        <input type="range" id="max-turn" min="0" max="100" value="100">
                    </div>
                </div>

            </div>

            <div class="footer">
                <p>SYSTEM ONLINE</p>
            </div>
        </aside>

        <!-- Map Container -->
        <main class="map-wrapper">
            <div id="map"></div>
            <div class="overlay-loader hidden" id="loader">
                <div class="spinner"></div>
                <span>COMPUTING TRAJECTORY...</span>
            </div>

            <!-- HUD Overlay -->
            <div class="hud-overlay">
                <div class="hud-item">
                    <span class="hud-label">SPEED</span>
                    <span class="hud-value">0 <small>km/h</small></span>
                </div>
                <div class="hud-item">
                    <span class="hud-label">LATITUDE</span>
                    <span class="hud-value" id="hud-lat">--</span>
                </div>
                <div class="hud-item">
                    <span class="hud-label">LONGITUDE</span>
                    <span class="hud-value" id="hud-lng">--</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Leaflet JS -->
    <script src="{{ url_for('static', filename='vendor/leaflet.js') }}"></script>

    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>